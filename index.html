<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Light of Islam — Prayer, Qibla, Hadith & Articles</title>
<meta name="description" content="Light of Islam — Accurate Prayer times, Qibla direction, Hadith of the day and long-form Islamic articles in Bangla, English and Arabic." />
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='80'>☪</text></svg>">

<style>
:root{--green:#0b5a3a;--gold:#c8a44c;--bg:#f8fbf9;--card:#fff;--muted:#4f6b5e;--maxw:1100px}
*{box-sizing:border-box}body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans",sans-serif;background:linear-gradient(180deg,#ffffff,#f7fbf8);color:#062f21}
.container{max-width:var(--maxw);margin:20px auto;padding:0 16px}
.header{display:flex;align-items:center;gap:12px;padding:18px 0}
.logo{width:78px;height:78px;border-radius:12px;background:#fff;box-shadow:0 10px 30px rgba(9,40,28,0.06);display:flex;align-items:center;justify-content:center;overflow:hidden}
.logo img{width:100%;height:100%;object-fit:contain}
.brand h1{margin:0;font-family:Playfair Display,serif;color:var(--green);font-size:22px}
.brand p{margin:0;color:var(--muted);font-size:13px}
.nav{margin-left:auto;display:flex;align-items:center;gap:8px}
.nav a{color:var(--green);text-decoration:none;padding:8px 12px;border-radius:8px;font-weight:700}
.nav a.cta{background:var(--gold);color:#062f21}
.lang-toggle{display:flex;border-radius:8px;overflow:hidden;border:1px solid rgba(6,70,40,0.08)}
.lang-toggle button{background:transparent;border:0;padding:8px 10px;cursor:pointer}
.lang-toggle button.active{background:var(--green);color:#fff}
.hero{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:10px}
.card{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 12px 35px rgba(9,40,28,0.06)}
.hero-title{font-family:Playfair Display,serif;color:var(--green);font-size:24px;margin:0}
.hero-sub{color:var(--muted);margin-top:6px}
.btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
.btn-primary{background:var(--green);color:#fff}
.btn-ghost{background:transparent;border:1px solid rgba(10,70,50,0.06)}
.small{font-size:13px;color:var(--muted)}
.main-grid{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:18px}
.section-title{font-size:18px;color:var(--green);font-weight:800;margin-bottom:8px}
.prayer-table td{padding:8px;border-bottom:1px dashed #eef6f0}
.prayer-name{font-weight:800}
.hadith-box{background:#fff8e6;padding:14px;border-left:6px solid var(--gold);font-weight:800;font-size:18px}
.articles-list{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
.article-card{padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfff7);box-shadow:0 8px 20px rgba(6,40,28,0.04)}
.article-title{color:var(--green);font-weight:800;margin:0}
.article-meta{font-size:13px;color:var(--muted);margin-top:6px}
.input{width:100%;padding:10px;border-radius:8px;border:1px solid #e6f0ea;margin-top:8px}
.modal{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:10000}
.modal.show{display:flex}
.modal-card{width:92%;max-width:980px;background:#fff;border-radius:12px;padding:18px;max-height:90%;overflow:auto}
.close{background:none;border:0;font-weight:800;cursor:pointer}
.footer{margin-top:28px;padding:12px;text-align:center;color:var(--muted);font-size:13px}
@media (max-width:980px){.hero{grid-template-columns:1fr}.main-grid{grid-template-columns:1fr}.nav{display:none}}
</style>

</head>
<body>
  <div class="container">

    <!-- Header -->
    <div class="header">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="logo">
  <img src="images/light-of-islam-logo.png" alt="Light of Islam Logo"
       onerror="this.src='https://i.ibb.co/dkFJh7q/Light-of-Islam-Logo.png'">
</div>

        <div class="brand"><h1>Light of Islam</h1><p class="small">Prayer • Qibla • Hadith • Articles</p></div>
      </div>

      <nav class="nav" aria-label="Main nav">
        <a href="#home">Home</a>
        <a href="#articles" class="cta">Articles</a>
        <a href="#contact">Contact</a>

        <span class="lang-toggle" style="margin-left:10px">
          <button id="btn-en">EN</button><button id="btn-bn">BN</button><button id="btn-ar">AR</button>
        </span>

        <button id="loginBtn" class="btn btn-primary" style="margin-left:10px">Login / Sign up</button>
      </nav>
    </div>

    <!-- HERO -->
    <section id="home" class="hero">
      <div class="card">
        <h2 class="hero-title">Light of Islam — Tools for daily worship & learning</h2>
        <p class="hero-sub">Accurate prayer times, Qibla direction, Hadith of the day and a library of long-form Islamic articles in multiple languages.</p>

        <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn btn-primary" onclick="document.getElementById('articles').scrollIntoView({behavior:'smooth'})">Explore Articles</button>
          <button class="btn btn-ghost" onclick="document.getElementById('qibla').scrollIntoView({behavior:'smooth'})">Find Qibla</button>
          <button class="btn btn-ghost" onclick="document.getElementById('hadithBlock').scrollIntoView({behavior:'smooth'})">Hadith of the Day</button>
        </div>

        <div style="margin-top:12px" class="small">Tip: Allow location to auto-detect prayer times & qibla direction.</div>
      </div>

      <aside class="card">
        <div style="font-weight:800;color:var(--green)">Quick Tools</div>
        <div style="margin-top:10px">
          <label class="small">Get Prayer Times</label>
          <input id="cityInput" class="input" placeholder="Type city name (or click Use My Location)" />
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn btn-primary" onclick="getPrayerTimesByCity()">Get Times</button>
            <button class="btn btn-ghost" onclick="getPrayerTimesByGeo()">Use My Location</button>
          </div>

          <div style="margin-top:14px">
            <label class="small">Qibla</label>
            <button class="btn btn-ghost" style="width:100%;margin-top:8px" onclick="getQiblaByGeo()">Get Qibla Direction</button>
          </div>

          <div style="margin-top:14px">
            <label class="small">Support</label>
            <p class="small">AdSense placeholder • add ad code after approval.</p>
            <div class="small" style="margin-top:8px">Email: <a href="mailto:lightofislam426@gmail.com">lightofislam426@gmail.com</a></div>
          </div>
        </div>
      </aside>
    </section>

    <!-- MAIN -->
    <div class="main-grid">
      <div>

        <!-- Prayer Times -->
        <section id="prayer-times" class="card">
          <div class="section-title">Prayer Times</div>
          <div id="prayerMeta" class="small">Local times — update by location</div>
          <table class="prayer-table" style="width:100%;margin-top:10px">
            <tbody>
              <tr><td class="prayer-name">Fajr</td><td id="tFajr">—</td></tr>
              <tr><td class="prayer-name">Sunrise</td><td id="tSunrise">—</td></tr>
              <tr><td class="prayer-name">Dhuhr</td><td id="tDhuhr">—</td></tr>
              <tr><td class="prayer-name">Asr</td><td id="tAsr">—</td></tr>
              <tr><td class="prayer-name">Maghrib</td><td id="tMaghrib">—</td></tr>
              <tr><td class="prayer-name">Isha</td><td id="tIsha">—</td></tr>
            </tbody>
          </table>
        </section>

        <!-- Qibla -->
        <section id="qibla" class="card" style="margin-top:16px">
          <div class="section-title">Qibla Direction</div>
          <div id="qiblaResult" class="small">Allow location and press 'Get Qibla Direction'</div>
          <div style="height:220px;margin-top:12px;border-radius:10px;overflow:hidden;position:relative;background:linear-gradient(180deg,#fff,#f6fffb);display:flex;align-items:center;justify-content:center">
            <canvas id="qiblaCompass" width="380" height="220" style="max-width:100%"></canvas>
          </div>
        </section>

        <!-- Hadith -->
        <section id="hadithBlock" class="card" style="margin-top:16px">
          <div class="section-title">Hadith of the Day</div>
          <div id="hadithText" class="hadith-box">Loading…</div>
          <div style="margin-top:12px"><button class="btn btn-ghost" onclick="newHadith()">New Hadith</button></div>
        </section>

        <!-- Articles -->
        <section id="articles" class="card" style="margin-top:16px">
          <div class="section-title">Articles Library</div>
          <p class="small">18 long-form articles arranged by category (A–F). Click any article to open full content (Arabic + translation references included).</p>
          <div id="articlesList" class="articles-list"></div>
        </section>

      </div>

      <!-- RIGHT SIDEBAR -->
      <aside>
        <div class="card">
          <div class="section-title">Contact</div>
          <form id="contactForm" onsubmit="submitContact(event)">
            <input id="contactName" class="input" placeholder="Your name" required />
            <input id="contactEmail" class="input" placeholder="Email" required />
            <textarea id="contactMessage" class="input" rows="4" placeholder="Message" required></textarea>
            <div style="text-align:right;margin-top:8px"><button class="btn btn-primary" type="submit">Send</button></div>
          </form>
          <div id="contactStatus" class="small" style="display:none;margin-top:8px"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <div class="section-title">About</div>
          <p class="small">Light of Islam — spreading authentic Islamic knowledge with accurate tools and trusted references. Email: <a href="mailto:lightofislam426@gmail.com">lightofislam426@gmail.com</a></p>
        </div>
      </aside>
    </div>

    <footer class="footer">
      © <span id="year"></span> Light of Islam • Built with care
    </footer>
  </div>

  <!-- LOGIN MODAL -->
  <div id="loginModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div style="font-weight:800;color:var(--green)">Login / Sign up</div>
        <button class="close" onclick="closeModal()">✕</button>
      </div>

      <div id="authArea" style="margin-top:12px">
        <div class="small">Use Email & Password to sign up / login. Google login available — add Firebase config in the script section below for real OAuth.</div>
        <input id="authEmail" class="input" placeholder="Email" />
        <input id="authPassword" class="input" placeholder="Password" type="password" />
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn btn-primary" onclick="signup()">Sign up</button>
          <button class="btn btn-ghost" onclick="login()">Login</button>
          <button class="btn btn-ghost" onclick="googleLogin()">Google</button>
        </div>
        <div class="small" style="margin-top:8px">Demo uses localStorage. For production, follow README below to add Firebase Auth.</div>
      </div>

      <div id="userArea" style="display:none;margin-top:12px">
        <div id="currentUser" style="font-weight:700"></div>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button class="btn btn-ghost" onclick="logout()">Logout</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ARTICLE MODAL -->
  <div id="articleModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h2 id="modalTitle" style="margin:0;color:var(--green)"></h2>
        <button class="close" onclick="closeModalArticle()">✕</button>
      </div>
      <div id="modalBody" style="margin-top:12px;line-height:1.75"></div>
    </div>
  </div>

<script>
/* ================= Utilities */
try{ document.getElementById('year').textContent = new Date().getFullYear(); }catch(e){}
function escapeHtml(s){ if(!s) return ''; return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* ================ Language Toggle ============= */
let LOI_LANG = localStorage.getItem('loi_lang') || 'en';
function setLang(l){ LOI_LANG = l; localStorage.setItem('loi_lang', l); document.querySelectorAll('.lang-toggle button').forEach(b=>b.classList.remove('active')); document.getElementById(l==='en'?'btn-en':l==='bn'?'btn-bn':'btn-ar').classList.add('active'); renderArticles(); renderHadith(); }
document.getElementById('btn-en').onclick = ()=>setLang('en'); document.getElementById('btn-bn').onclick = ()=>setLang('bn'); document.getElementById('btn-ar').onclick = ()=>setLang('ar');
setLang(LOI_LANG);

/* ================ Articles Data (18 items: A-F categories) ================ */
/* Each item: id,cat,title_en,title_bn,title_ar,content_en,content_bn,content_ar,ref_ar,ref_en,author,date,excerpt */
const articles = [
/* Category A (Aqeedah) */
{ id:'a1',cat:'A',title_en:'Tawheed: Understanding the Oneness of Allah',title_bn:'তাওহীদ: আল্লাহর একত্ব বোঝা',title_ar:'التوحيد: فهم وحدانية الله',author:'Light of Islam',date:'2025-10-28',excerpt:'Tawheed is the foundation. Rububiyyah, Uluhiyyah, Asma wa Sifat.', ref_ar:'لَا إِلَهَ إِلَّا اللَّهُ', ref_en:'“There is no god except Allah.”', content_en:`Tawheed — the declaration that there is no deity worthy of worship except Allah — is the bedrock of Islamic faith. Without Tawheed, worship loses its orientation.

Types of Tawheed:
1) Tawheed al-Rububiyyah — Oneness of Lordship.
2) Tawheed al-Uluhiyyah — Oneness of Worship.
3) Tawheed al-Asma wa Sifat — Oneness of Names & Attributes.

Practical: Purify intention, avoid modern forms of shirk, rely on authentic scholars for guidance.` , content_bn:`তাওহীদ — ইসলামি বিশ্বাসের ভিত্তি। উদ্দেশ্য খুসি রেখে আল্লাহ ছাড়া আর কারও কাছে ইবাদত না করা।`, content_ar:'التوحيد أساس الإسلام.' },

{ id:'a2',cat:'A',title_en:'Belief in Angels: Roles & Reality',title_bn:'ফেরেশতাদের প্রতি বিশ্বাস',title_ar:'الإيمان بالملائكة',author:'Light of Islam',date:'2025-10-28',excerpt:'Angels created from light, fulfilling Allah’s commands.', ref_ar:'خُلِقَتِ الْمَلَائِكَةُ مِنْ نُورٍ', ref_en:'“Angels were created from light.” — Sahih Muslim', content_en:`Belief in angels is essential. Angels like Jibril, Mikail, Israfil have duties. They record deeds and carry Allah’s messages.` , content_bn:'ফেরেশতা আলোর সৃষ্টি। তারা মানুষের কাজ লিখে রাখে।', content_ar:'الملائكة مخلوقة من نور.' },

{ id:'a3',cat:'A',title_en:'Names & Attributes of Allah (Asma wa Sifat)',title_bn:'আল্লাহর নাম ও গুণ',title_ar:'أسماء الله وصفاته',author:'Light of Islam',date:'2025-10-28',excerpt:'Affirm names & attributes with balance — neither liken nor deny.', ref_ar:'سُبْحَانَ اللَّهِ وَبِحَمْدِهِ', ref_en:'Quranic & Hadith references', content_en:`Allah's Beautiful Names guide the believer to hope, fear and trust. Reflect on Ar-Rahman, Ar-Rahim, Al-Hakim and apply their lessons.` , content_bn:'আল্লাহর নাম মনে করলে ভরসা ও কৃতজ্ঞতা বাড়ে।', content_ar:'أسماء الله حسنى.' },

/* Category B (Seerah) */
{ id:'b1',cat:'B',title_en:'The Noble Character of Prophet Muhammad ﷺ',title_bn:'রাসুল (সা.)-এর মহান চরিত্র',title_ar:'خلُق النبي ﷺ',author:'Light of Islam',date:'2025-10-28',excerpt:'Exemplary manners — mercy, patience, justice.', ref_ar:'وَإِنَّكَ لَعَلَىٰ خُلُقٍ عَظِيمٍ', ref_en:'Quran 68:4', content_en:`The Prophet ﷺ was sent to perfect noble manners. His life teaches mercy, patience and honesty.` , content_bn:'রাসুল (সা.)-এর জীবন নীতিমালা শেখায়।', content_ar:'قدوة الحسنة.' },

{ id:'b2',cat:'B',title_en:'Hijrah: Migration & Community Building',title_bn:'হিজরত ও সমাজ নির্মাণ',title_ar:'الهجرة وبناء المجتمع',author:'Light of Islam',date:'2025-10-28',excerpt:'Hijrah established the first Islamic constitution.', ref_ar:'وَأَمْرُهُمْ شُورَى بَيْنَهُمْ', ref_en:'Consultation principle', content_en:`Hijrah allowed Muslims to build a just society in Madinah. The Constitution of Medina shows early pluralism and rights.` , content_bn:'হিজরত সমাজ গঠনে শিক্ষণীয় দিক রাখে।', content_ar:'الهجرة دليل على بناء مجتمع.' },

{ id:'b3',cat:'B',title_en:'Seerah Miracles & Wisdom',title_bn:'সীরাহে অলৌকিকতা ও শিক্ষা',title_ar:'معجزات السيرة',author:'Light of Islam',date:'2025-10-28',excerpt:'Qur’an miracle, splitting of the moon — study authentically.', ref_ar:'وَٱن شَقَّ ٱلْقَمَرَ', ref_en:'Reported in hadith literature', content_en:`Miracles in the Seerah validate prophethood and teach reliance on Allah.` , content_bn:'অলৌকিক কাহিনী সতর্কভাবে অধ্যয়ন করো।', content_ar:'المعجزات آيات.' },

/* Category C (Lifestyle / Youth) */
{ id:'c1',cat:'C',title_en:'Daily Routine for Spiritual Growth',title_bn:'আত্মিক উন্নতির দৈনন্দিন রুটিন',title_ar:'روتين يومي للنمو الروحي',author:'Light of Islam',date:'2025-10-28',excerpt:'Small consistent acts build a firm spiritual life.', ref_ar:'اقْرَأْ بِاسْمِ رَبِّكَ', ref_en:'Quranic exhortation', content_en:`Start small: morning adhkar, short Quran, voluntary prayers, charity. Consistency beats intensity.` , content_bn:'প্রতিদিন নিয়মিত ছোট ছোট আমল আত্মিক উন্নতি ঘটায়।', content_ar:'العادات اليومية.' },

{ id:'c2',cat:'C',title_en:'Islamic Etiquette in Social Media Age',title_bn:'সোশ্যাল মিডিয়া যুগে শিষ্টাচার',title_ar:'آداب الإسلام في عصر وسائل التواصل',author:'Light of Islam',date:'2025-10-28',excerpt:'Verify before sharing, be kind and truthful online.', ref_ar:'مَنْ كَانَ يُؤْمِنُ بِاللَّهِ', ref_en:'Sahih Muslim', content_en:`Pause before sharing, verify facts, respect privacy and speak kindly.` , content_bn:'অনলাইনে সততা ও সম্মান বজায় রাখো।', content_ar:'آداب التعامل الرقمي.' },

{ id:'c3',cat:'C',title_en:'Youth & Faith: Facing Modern Challenges',title_bn:'তরুণ ও বিশ্বাস: আধুনিক চ্যালেঞ্জ',title_ar:'الشباب والإيمان',author:'Light of Islam',date:'2025-10-28',excerpt:'Balance study, worship, and community service.', ref_ar:'وَقُلِ اعْمَلُوا فَسَيَرَى اللَّهُ عَمَلَكُمْ', ref_en:'Quran', content_en:`Anchor identity in faith, seek mentors, volunteer and manage time wisely.` , content_bn:'তরুণরা গাইডেন্স ও সঠিক বন্ধু চাই।', content_ar:'الشباب يحتاجون للهداية.' },

/* Category D (Women) */
{ id:'d1',cat:'D',title_en:'Rights & Role of Women in Islam',title_bn:'ইসলামে নারীর অধিকার ও ভূমিকা',title_ar:'حقوق المرأة في الإسلام',author:'Light of Islam',date:'2025-10-28',excerpt:'Education, property rights, spiritual equality.', ref_ar:'وَلَهُنَّ مِثْلُ الَّذِي عَلَيْهِنَّ بِالْمَعْرُوفِ', ref_en:'Quranic instruction', content_en:`Islam affirms dignity & rights for women — study examples of Khadijah (ra), Aisha (ra).` , content_bn:'ইসলাম নারীর মর্যাদা সমর্থন করে।', content_ar:'حقوق المرأة ثابتة.' },

{ id:'d2',cat:'D',title_en:'Motherhood & Child Upbringing',title_bn:'মাতৃত্ব ও শিশুপালন',title_ar:'الأمومة وتربية الأطفال',author:'Light of Islam',date:'2025-10-28',excerpt:'Teach prayer gently; lead by example.', ref_ar:'وَوَصَّيْنَا الْإِنْسَانَ بِوَالِدَيْهِ', ref_en:'Quran', content_en:`Motherhood is honored; provide moral education and love.` , content_bn:'মাতৃত্ব সম্মানিত — উদাহরণ দেখাও।', content_ar:'مكانة الأم عظيمة.' },

{ id:'d3',cat:'D',title_en:'Women Scholars of Early Islam',title_bn:'ইসলামের নারী পণ্ডিতরা',title_ar:'عالمات الإسلام',author:'Light of Islam',date:'2025-10-28',excerpt:'Aisha (ra) & others transmitted knowledge.', ref_ar:'سَأَلَتْ عَائِشَةُ', ref_en:'Hadith transmissions', content_en:`Study the legacy of women scholars who taught hadith and fiqh.` , content_bn:'নারী পণ্ডিতদের জীবন অধ্যয়ন করো।', content_ar:'العلم عند النساء.' },

/* Category E (History) */
{ id:'e1',cat:'E',title_en:'Rightly Guided Caliphs: Leadership Principles',title_bn:'খোলাফায়ে রাশেদিন: নেতৃত্ব শিক্ষা',title_ar:'الخلفاء الراشدون',author:'Light of Islam',date:'2025-10-28',excerpt:'Consultation, justice and public welfare.', ref_ar:'وَأَمْرُهُمْ شُورَى بَيْنَهُمْ', ref_en:'Quran', content_en:`Abu Bakr, Umar, Uthman, Ali — examples of governance & accountability.` , content_bn:'খোলাফাদের জীবন থেকে শাসন শিক্ষা নেওয়া যায়।', content_ar:'الخلافة عبرة.' },

{ id:'e2',cat:'E',title_en:'Golden Age: Science & Civilization',title_bn:'স্বর্ণযুগ: বিজ্ঞান ও সভ্যতা',title_ar:'العصر الذهبي',author:'Light of Islam',date:'2025-10-28',excerpt:'From Baghdad to Cordoba, science progressed.', ref_ar:'اقْرَأْ بِاسْمِ رَبِّكَ', ref_en:'Quran', content_en:`Ibn Sina, Al-Khwarizmi, Ibn al-Haytham — pioneers in medicine, math, optics.` , content_bn:'ইসলামী সভ্যতা বিজ্ঞানে বড় অবদান রেখেছে।', content_ar:'العلم ازدهر.' },

{ id:'e3',cat:'E',title_en:'Islamic Art & Architecture',title_bn:'ইসলামী শিল্প ও স্থাপত্য',title_ar:'الفن والعمارة الإسلامية',author:'Light of Islam',date:'2025-10-28',excerpt:'Geometry, calligraphy & mosque spaces.', ref_ar:'قُلِ ادْعُوا اللَّهَ أَوِ ادْعُوا الرَّحْمَنَ', ref_en:'Quran', content_en:`Art reflects unity and aesthetic restraint; mosques shape community life.` , content_bn:'জ্যামিতিক নকশা ও লিপি ধর্মীয় সৌন্দর্য প্রকাশ করে।', content_ar:'الزخارف رمز.' },

/* Category F (Science) */
{ id:'f1',cat:'F',title_en:'Islamic Contributions to Medicine',title_bn:'ইসলামী চিকিৎসাশাস্ত্রে অবদান',title_ar:'مساهمات الإسلام في الطب',author:'Light of Islam',date:'2025-10-28',excerpt:'Hospitals, clinical methods & pharmacology.', ref_ar:'وَأَنْزَلْنَا الْعِلْمَ', ref_en:'Historical works', content_en:`Medieval Muslim physicians advanced clinical practice and public health.` , content_bn:'ইসলামী চিকিৎসাবিদ্যার ইতিহাস সমৃদ্ধ।', content_ar:'ابن سينا أثر.' },

{ id:'f2',cat:'F',title_en:'Astronomy & Islamic Calendar',title_bn:'জ্যোতির্বিজ্ঞান ও ক্যালেন্ডার',title_ar:'علم الفلك',author:'Light of Islam',date:'2025-10-28',excerpt:'Lunar months & astronomical advances.', ref_ar:'وَارْتَقِبُوا', ref_en:'Quranic context', content_en:`Astronomy supported calendars, navigation and prayer time calculations.` , content_bn:'চাঁদের ওপর ক্যালেন্ডার নির্ভর করে।', content_ar:'التقويم القمري.' },

{ id:'f3',cat:'F',title_en:'Ethics of Scientific Inquiry in Islam',title_bn:'গবেষণার নৈতিকতা',title_ar:'أخلاقيات البحث العلمي',author:'Light of Islam',date:'2025-10-28',excerpt:'Benefit humanity, avoid harm, maintain honesty.', ref_ar:'وَعَلَّمَ آدَمَ الْأَسْمَاءَ', ref_en:'Quran', content_en:`Knowledge is encouraged but must serve people ethically.` , content_bn:'গবেষণায় নৈতিকতা গুরুত্বপূর্ণ।', content_ar:'الأخلاق في العلم.' }
];

/* ============ Render articles list ============ */
function renderArticles(){
  const root = document.getElementById('articlesList');
  if(!root) return;
  root.innerHTML = '';
  const lang = LOI_LANG || 'en';
  articles.forEach(a=>{
    const title = (lang==='bn'? (a.title_bn||a.title_en) : (lang==='ar'? (a.title_ar||a.title_en) : a.title_en));
    const excerpt = (lang==='bn' && a.content_bn) ? a.content_bn.slice(0,240) : (lang==='ar' && a.content_ar) ? a.content_ar.slice(0,240) : a.content_en.slice(0,240);
    const el = document.createElement('div'); el.className='article-card';
    el.innerHTML = `<div class="article-title">${escapeHtml(title)}</div><div class="article-meta">${a.author} • ${a.date} • Category ${a.cat}</div><p class="small">${escapeHtml(excerpt)}...</p><div style="margin-top:8px"><a href="javascript:openArticle('${a.id}')">Read full</a></div>`;
    root.appendChild(el);
  });
}
renderArticles();

/* ============ Article modal ============ */
function openArticle(id){
  const a = articles.find(x=>x.id===id); if(!a) return;
  const lang = LOI_LANG || 'en';
  const title = (lang==='bn'? (a.title_bn||a.title_en) : (lang==='ar'? (a.title_ar||a.title_en) : a.title_en));
  let content = (lang==='bn' && a.content_bn) ? a.content_bn : (lang==='ar' && a.content_ar) ? a.content_ar : a.content_en;
  const refHtml = `<div style="margin-top:12px;padding:12px;background:#fff8e6;border-left:4px solid var(--gold)"><strong>References</strong><div style="margin-top:8px"><div style="direction:rtl;font-size:18px">${a.ref_ar||''}</div><div style="margin-top:8px">${escapeHtml(a.ref_en||'')}</div></div></div>`;
  document.getElementById('modalTitle').textContent = title;
  document.getElementById('modalBody').innerHTML = content.split('\n\n').map(p=>`<p>${escapeHtml(p)}</p>`).join('') + refHtml;
  document.getElementById('articleModal').classList.add('show');
}
function closeModalArticle(){ document.getElementById('articleModal').classList.remove('show'); }

/* ============ Hadith ============ */
const hadiths = [
 {en:"The Prophet (ﷺ) said: The best among you are those who learn the Qur'an and teach it. — Sahih al-Bukhari", bn:"রাসুল (ﷺ) বলেছেন: তোমাদের মধ্যে সেরা তারা যারা কোরআন শেখে ও শেখায়।", ar:"قال ﷺ: خَيْرُكُمْ مَنْ تَعَلَّمَ الْقُرْآنَ وَعَلَّمَهُ."},
 {en:"Actions are judged by intentions. — Sahih al-Bukhari", bn:"কর্মসমূহ উদ্দেশ্য দ্বারা বিচারিত হয়।", ar:"الأعمال بالنيات."},
 {en:"Whoever believes in Allah and the Last Day, let him speak good or remain silent. — Sahih Muslim", bn:"যে আল্লাহ ও পরকালের বিশ্বাসী হউক, সে ভালো কথা বলুক বা নীরব থাকুক।", ar:"مَنْ كَانَ يُؤْمِنُ بِاللَّهِ وَالْيَوْمِ الآخِرِ..."},
 {en:"The best of people are those who benefit others.", bn:"মানুষের সেরা হলো যারা অন্যকে উপকৃত করে।", ar:"خَيْرُ النَّاسِ أَنْفَعُهُمْ لِلنَّاسِ."}
];
function hadithOfDay(){ const d=new Date(); return hadiths[(d.getFullYear()*10000 + (d.getMonth()+1)*100 + d.getDate()) % hadiths.length]; }
function renderHadith(){ const h=hadithOfDay(); const lang = LOI_LANG || 'en'; const t = (lang==='bn'?h.bn:(lang==='ar'?h.ar:h.en)); try{ document.getElementById('hadithText').textContent = t; }catch(e){} }
function newHadith(){ const r=hadiths[Math.floor(Math.random()*hadiths.length)]; document.getElementById('hadithText').textContent = (LOI_LANG==='bn'?r.bn:(LOI_LANG==='ar'?r.ar:r.en)); }
renderHadith();

/* ============ Prayer Times (AlAdhan) ============ */
async function setPrayerTimes(data){ try{ const timings = data.data.timings; document.getElementById('tFajr').textContent = timings.Fajr; document.getElementById('tSunrise').textContent = timings.Sunrise; document.getElementById('tDhuhr').textContent = timings.Dhuhr; document.getElementById('tAsr').textContent = timings.Asr; document.getElementById('tMaghrib').textContent = timings.Maghrib; document.getElementById('tIsha').textContent = timings.Isha; document.getElementById('prayerMeta').textContent = 'Times updated for '+(data.data.meta.timezone||'your location'); }catch(e){ console.warn(e); } }

async function getPrayerTimesByGeo(){ if(!navigator.geolocation){ alert('Geolocation not supported'); return; } navigator.geolocation.getCurrentPosition(async pos=>{ const lat=pos.coords.latitude.toFixed(6), lon=pos.coords.longitude.toFixed(6); try{ const res = await fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=5`); const data = await res.json(); setPrayerTimes(data); }catch(e){ alert('Prayer times fetch failed'); } }, ()=>alert('Allow location to use this feature')); }

async function getPrayerTimesByCity(){ const city = document.getElementById('cityInput').value.trim(); if(!city){ alert('Type a city name or use location'); return; } try{ const geo = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(city)}`); const gdata = await geo.json(); if(!gdata || !gdata[0]){ alert('City not found'); return; } const lat = parseFloat(gdata[0].lat).toFixed(6), lon = parseFloat(gdata[0].lon).toFixed(6); const res = await fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=5`); const data = await res.json(); setPrayerTimes(data); }catch(e){ alert('Could not fetch prayer times'); } }

/* ============ Qibla (AlAdhan) ============ */
async function getQiblaByGeo(){ if(!navigator.geolocation){ alert('Geolocation not supported'); return; } navigator.geolocation.getCurrentPosition(async pos=>{ const lat=pos.coords.latitude, lon=pos.coords.longitude; try{ const res = await fetch(`https://api.aladhan.com/v1/qibla/${lat}/${lon}`); const data = await res.json(); drawCompass(data.data.direction); }catch(e){ alert('Qibla fetch failed'); } }, ()=>alert('Allow location to use this feature')); }

function drawCompass(dir){ const c=document.getElementById('qiblaCompass'); if(!c) return; const ctx=c.getContext('2d'); ctx.clearRect(0,0,c.width,c.height); ctx.fillStyle='#fff'; ctx.fillRect(0,0,c.width,c.height); const cx=c.width/2, cy=c.height/2, r=Math.min(cx,cy)-18; ctx.beginPath(); ctx.arc(cx,cy,r,0,Math.PI*2); ctx.fillStyle='#f6fffb'; ctx.fill(); ctx.strokeStyle='#e6efe6'; ctx.lineWidth=6; ctx.stroke(); ctx.fillStyle='#0b5a3a'; ctx.font='18px sans-serif'; ctx.textAlign='center'; ctx.fillText('N', cx, cy - r + 24); const angle=(dir)*Math.PI/180; ctx.save(); ctx.translate(cx,cy); ctx.rotate(angle); ctx.beginPath(); ctx.moveTo(0,-r+12); ctx.lineTo(10,0); ctx.lineTo(-10,0); ctx.closePath(); ctx.fillStyle='#c8a44c'; ctx.fill(); ctx.restore(); ctx.fillStyle='#0b5a3a'; ctx.font='14px sans-serif'; ctx.fillText(Math.round(dir)+'° from North', cx, cy + r - 8); if(document.getElementById('qiblaResult')) document.getElementById('qiblaResult').textContent = 'Qibla direction: '+Math.round(dir)+'° from North'; }

/* Try auto-update prayer on load if permission given */
if(navigator.geolocation){
  navigator.geolocation.getCurrentPosition(pos=>{ fetch(`https://api.aladhan.com/v1/timings?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&method=5`).then(r=>r.json()).then(setPrayerTimes).catch(()=>{}); }, ()=>{});
}

/* ============ Contact form (demo) ============ */
function submitContact(e){ e.preventDefault(); const name=document.getElementById('contactName').value; const email=document.getElementById('contactEmail').value; const msg=document.getElementById('contactMessage').value; document.getElementById('contactStatus').style.display='block'; document.getElementById('contactStatus').textContent='Message received (demo). To receive as email, replace submitContact() with Formspree endpoint or server.'; setTimeout(()=>{ document.getElementById('contactStatus').style.display='none'; },4000); }

/* ============ Auth (local demo) ============ */
const authKey = 'loi_users_v1';
function loadUsers(){ try{ return JSON.parse(localStorage.getItem(authKey)||'{}'); }catch(e){ return {}; } }
function saveUsers(u){ localStorage.setItem(authKey, JSON.stringify(u)); }
function hashPwd(p){ let h=0; for(let i=0;i<p.length;i++){ h=((h<<5)-h)+p.charCodeAt(i); h|=0; } return h.toString(36); }
function signup(){ const email=document.getElementById('authEmail').value.trim().toLowerCase(); const pass=document.getElementById('authPassword').value; if(!email||!pass){ alert('Provide email & password'); return; } const users=loadUsers(); if(users[email]){ alert('User exists. Please login'); return; } users[email]={email,pass:hashPwd(pass),created:new Date().toISOString()}; saveUsers(users); alert('Signup successful — logged in'); setCurrentUser(email); closeModal(); }
function login(){ const email=document.getElementById('authEmail').value.trim().toLowerCase(); const pass=document.getElementById('authPassword').value; const users=loadUsers(); if(!users[email]||users[email].pass!==hashPwd(pass)){ alert('Invalid credentials'); return; } alert('Login successful'); setCurrentUser(email); closeModal(); }
function logout(){ localStorage.removeItem('loi_current'); renderAuthArea(); }
function setCurrentUser(email){ localStorage.setItem('loi_current', email); renderAuthArea(); }
function getCurrentUser(){ return localStorage.getItem('loi_current'); }
function renderAuthArea(){ const cur=getCurrentUser(); if(cur){ document.getElementById('authArea').style.display='none'; document.getElementById('userArea').style.display='block'; document.getElementById('currentUser').textContent=cur; } else { document.getElementById('authArea').style.display='block'; document.getElementById('userArea').style.display='none'; } }
document.getElementById('loginBtn').onclick = ()=>{ document.getElementById('loginModal').classList.add('show'); renderAuthArea(); }
function closeModal(){ document.getElementById('loginModal').classList.remove('show'); }

/* Google Login placeholder — To enable real Google sign-in:
   1) Create Firebase project and enable Google Sign-In
   2) Add Firebase config below (replace the config object)
   3) Uncomment initializeApp(...) and googleSignIn() function
   4) Ensure Authorized domains include your domain (lightofislam.top)
*/
function googleLogin(){
  alert('Google Sign-In placeholder. For real Google login, follow the README steps to add Firebase config. This will login a demo google_user@lightofislam.local account.');
  const demo='google_user@lightofislam.local'; const users=loadUsers(); if(!users[demo]){ users[demo]={email:demo,pass:hashPwd('google'),created:new Date().toISOString()}; saveUsers(users); } setCurrentUser(demo); closeModal();
}

/* ============ Initial renders ============ */
try{ renderArticles(); renderHadith(); renderAuthArea(); }catch(e){}

/* ================= README / Quick instructions (in-browser console shown) =================
1) Firebase Google Auth (production):
   - Go to https://console.firebase.google.com -> Create project -> Authentication -> Sign-in method -> Enable Google
   - Add Authorized domains: lightofislam.top and <your-github-pages-domain>
   - Copy firebaseConfig and paste below, then uncomment initialization lines.

Example Firebase config (DO NOT commit your real keys to public repos without restrictions):
// const firebaseConfig = { apiKey: "API_KEY", authDomain: "PROJECT.firebaseapp.com", ... };
// firebase.initializeApp(firebaseConfig);

2) Formspree (Contact emails):
   - Use Formspree free plan: https://formspree.io -> create form -> get endpoint
   - Replace submitContact() to POST the form to Formspree URL

3) AdSense:
   - After AdSense approval, paste ad script into the Donate/Ads card

4) HTTPS & OAuth:
   - Make sure Enforce HTTPS is ON in GitHub Pages settings and Firebase authorized domain includes your domain.

5) If you want me to push a repository commit directly, provide a temporary GitHub token OR add me as collaborator (I cannot accept direct repo access from here). Otherwise, copy this file and replace your current index.html.

====================================================================================== */

</script>

</body>
</html>
