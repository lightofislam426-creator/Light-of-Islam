<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Light of Islam — Prayer times, Quran, Hadith & Tools</title>
<meta name="description" content="Light of Islam — Prayer times, Qibla, Hadith, Quran resources and Islamic articles." />
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='80'>☪</text></svg>" />
<!-- ====== Styles (compact, production-ready) ====== -->
<style>
:root{
  --green:#0b5a3a; --accent:#c8a44c; --soft:#f7f6f0; --card:#ffffff;
  --muted:#6c6c6c; --maxw:1100px; --radius:12px; --shadow: 0 8px 30px rgba(10,10,10,0.08);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", sans-serif;
}
*{box-sizing:border-box}
body{margin:0;background:linear-gradient(180deg,var(--soft),#ffffff 40%);color:#0b2a20;-webkit-font-smoothing:antialiased}
.container{max-width:var(--maxw); margin:28px auto; padding:0 16px}
.header{display:flex;align-items:center;gap:16px;padding:18px 0}
.logo {width:80px;height:80px;border-radius:14px;overflow:hidden;flex-shrink:0;background:#fff;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow)}
.logo img{width:100%;height:100%;object-fit:contain}
.title{font-family:"Playfair Display",serif;font-size:26px;color:var(--green);margin:0}
.subtitle{color:var(--muted);font-size:13px;margin-top:4px}
.nav{display:flex;gap:10px;align-items:center;margin-left:auto}
.nav a{color:var(--green);text-decoration:none;padding:8px 12px;border-radius:8px;font-weight:600}
.nav a.cta{background:var(--accent);color:#fff}
.hero{display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:center;margin-top:16px}
.hero-card{background:var(--card);padding:26px;border-radius:12px;box-shadow:var(--shadow)}
.hero-card h1{margin:0;font-family:"Playfair Display",serif;color:var(--green);font-size:32px}
.hero-card p{margin-top:10px;color:var(--muted)}
.quick-actions{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap}
.btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
.btn.primary{background:var(--green);color:#fff}
.btn.ghost{background:transparent;border:1px solid rgba(0,0,0,0.06);color:var(--green)}
.tool-box{background:linear-gradient(180deg,#ffffff,#f6fff6);padding:14px;border-radius:10px;border:1px solid rgba(5,50,30,0.03)}
.small{font-size:13px;color:var(--muted)}

/* grid */
.main-grid{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:22px}
.card{background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow)}
.section-title{font-size:20px;color:var(--green);margin-bottom:10px;font-weight:700}

/* Prayer table */
.prayer-table{width:100%;border-collapse:collapse;margin-top:10px}
.prayer-table td{padding:8px 6px;border-bottom:1px dashed #f0f0f0}
.prayer-name{font-weight:700;color:#0a4d33}

/* responsive */
@media (max-width:980px){
  .hero{grid-template-columns:1fr}
  .main-grid{grid-template-columns:1fr}
  .nav{display:none}
  .logo{width:64px;height:64px}
}
.footer{margin-top:28px;padding:20px 0;text-align:center;color:var(--muted);font-size:14px}
.adsense-placeholder{background:#fff8e6;border:1px dashed #e8d8b0;padding:12px;border-radius:10px;text-align:center;color:#7b6b3f;margin-top:12px}
.note{font-size:13px;color:var(--muted);margin-top:10px}
.link{color:var(--green);text-decoration:underline}
</style>
</head>
<body>

<div class="container">
  <!-- HEADER -->
  <header class="header" role="banner">
    <div style="display:flex;align-items:center;gap:12px">
      <div class="logo"><img src="images/light-of-islam-logo.png" alt="Light of Islam logo"></div>
      <div>
        <div class="title">Light of Islam</div>
        <div class="subtitle">Discover the beauty of Islam — Quran • Hadith • Prayer Tools</div>
      </div>
    </div>

    <nav class="nav" aria-label="Main navigation">
      <a href="#home">Home</a>
      <a href="#prayer-times">Prayer Times</a>
      <a href="#qibla">Qibla</a>
      <a href="#hadith">Hadith</a>
      <a href="#articles">Articles</a>
      <a class="cta" href="#contact">Contact</a>
    </nav>
  </header>

  <!-- HERO -->
  <section id="home" class="hero" aria-label="Hero section">
    <div class="hero-card" role="region">
      <h1>Light of Islam — Tools for daily worship & learning</h1>
      <p>Accurate prayer times, Qibla direction, Hadith of the day and a collection of Islamic articles to support your faith.</p>

      <div class="quick-actions">
        <button class="btn primary" onclick="document.getElementById('prayer-times').scrollIntoView({behavior:'smooth'})">See Prayer Times</button>
        <button class="btn ghost" onclick="document.getElementById('qibla').scrollIntoView({behavior:'smooth'})">Find Qibla</button>
        <button class="btn ghost" onclick="document.getElementById('hadith').scrollIntoView({behavior:'smooth'})">Hadith of the Day</button>
      </div>

      <div class="note">Tip: Allow location access for automatic local prayer times and Qibla direction.</div>
    </div>

    <aside class="tool-box" role="complementary">
      <div style="text-align:center">
        <strong>Quick Tools</strong>
      </div>

      <div style="margin-top:12px">
        <div class="small">Get Prayer Times</div>
        <input id="cityInput" placeholder="Type city name (or allow location)" style="width:100%;padding:8px;border-radius:8px;border:1px solid #e9efe9;margin-top:8px" />
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn primary" onclick="getPrayerTimesByCity()">Get Times</button>
          <button class="btn ghost" onclick="getPrayerTimesByGeo()">Use My Location</button>
        </div>

        <div style="margin-top:14px">
          <div class="small">Qibla</div>
          <button class="btn ghost" style="width:100%;margin-top:8px" onclick="getQiblaByGeo()">Get Qibla Direction</button>
        </div>

        <div style="margin-top:16px">
          <div class="small">Subscribe</div>
          <!-- replace action with your Formspree / mailer endpoint -->
          <form id="subscribeForm" onsubmit="alert('Demo subscribe — replace with your endpoint'); return false;">
            <input type="email" placeholder="you@example.com" required style="width:100%;padding:8px;border-radius:8px;border:1px solid #e9efe9" />
            <div style="text-align:right;margin-top:8px"><button class="btn primary" type="submit">Subscribe</button></div>
          </form>
        </div>
      </div>
    </aside>
  </section>

  <!-- MAIN GRID -->
  <div class="main-grid">
    <!-- LEFT: Tools & Posts -->
    <div>
      <!-- PRAYER TIMES -->
      <section id="prayer-times" class="card" aria-labelledby="prayerTitle">
        <div id="prayerTitle" class="section-title">Prayer Times</div>
        <div id="prayerMeta" class="small">Local times — updating automatically</div>
        <table class="prayer-table" id="prayerTable" aria-live="polite">
          <tbody>
            <tr><td class="prayer-name">Fajr</td><td id="tFajr">—</td></tr>
            <tr><td class="prayer-name">Sunrise</td><td id="tSunrise">—</td></tr>
            <tr><td class="prayer-name">Dhuhr</td><td id="tDhuhr">—</td></tr>
            <tr><td class="prayer-name">Asr</td><td id="tAsr">—</td></tr>
            <tr><td class="prayer-name">Maghrib</td><td id="tMaghrib">—</td></tr>
            <tr><td class="prayer-name">Isha</td><td id="tIsha">—</td></tr>
          </tbody>
        </table>
        <div class="note">If times look incorrect, try entering your city above or using your location.</div>
      </section>

      <!-- QIBLA -->
      <section id="qibla" class="card" aria-labelledby="qiblaTitle" style="margin-top:18px">
        <div id="qiblaTitle" class="section-title">Qibla Direction</div>
        <div id="qiblaResult" class="small">Allow location and press 'Get Qibla Direction'</div>
        <div style="height:260px;margin-top:12px;border-radius:10px;overflow:hidden;position:relative;background:linear-gradient(180deg,#fff,#f6fffb);display:flex;align-items:center;justify-content:center">
          <canvas id="qiblaCompass" width="380" height="240" style="max-width:100%"></canvas>
        </div>
      </section>

      <!-- HADITH -->
      <section id="hadith" class="card" style="margin-top:18px">
        <div class="section-title">Hadith of the Day</div>
        <div id="hadithText" class="small" style="margin-top:10px;font-style:italic">Loading…</div>
        <div style="margin-top:12px"><button class="btn ghost" onclick="newHadith()">New Hadith</button></div>
      </section>

      <!-- ARTICLES -->
      <section id="articles" class="card" style="margin-top:18px">
        <div class="section-title">Latest Articles</div>     
        <div style="margin-top:12px">
          <article style="padding:12px;border-radius:8px;background:#fbfffb;margin-bottom:8px">
            <h4 style="margin:0;color:var(--green)">How to Make Daily Dhikr</h4>
            <p class="small" style="margin-top:6px">Short practical guide to remembering Allah during the day.</p>
          </article>
          <article style="padding:12px;border-radius:8px;background:#fbfffb">
            <h4 style="margin:0;color:var(--green)">Fasting with Purpose</h4>
            <p class="small" style="margin-top:6px">Reflections on the intention behind fasting and compassion.</p>
          </article>
        </div>
      </section>

    </div>

    <!-- RIGHT: Sidebar -->
    <aside>
      <div class="card">
        <div class="section-title">Donate / Support</div>
        <p class="small">If you find the content helpful, consider supporting this project. (Add payment link)</p>
        <div class="adsense-placeholder" id="adPlaceholder">
        <br>

        </div>
      </div>

      <div class="card" style="margin-top:14px">
        <div class="section-title">Contact</div>
        <p class="small">Email: <a class="link" href="mailto:lightofislam426@gmail.com">lightofislam426@gmail.com</a></p>
        <p class="small">Use the contact form on your deployed site or replace with Formspree.</p>
      </div>
    </aside>
  </div>

  <footer class="footer">
    © <span id="year"></span> Light of Islam • All rights reserved • Made with sincerity
  </footer>
</div>

<!-- ====== Scripts: prayer times (AlAdhan), Qibla, Hadith ====== -->
<script>
document.getElementById('year').textContent = new Date().getFullYear();

/* Hadiths (local sample) */
const hadiths = [
  {text: "The Prophet (ﷺ) said: The best among you are those who learn the Qur'an and teach it. — Sahih al-Bukhari"},
  {text: "Actions are judged by intentions. — Sahih al-Bukhari"},
  {text: "Whoever believes in Allah and the Last Day, let him speak good or remain silent. — Sahih Muslim"},
  {text: "The best of people are those who benefit others. — General teaching"}
];
function hadithOfTheDay(){
  const d=new Date(); const idx=(d.getFullYear()*10000+d.getMonth()*100+d.getDate())%hadiths.length; return hadiths[idx];
}
function renderHadith(){ document.getElementById('hadithText').textContent = hadithOfTheDay().text; }
function newHadith(){ const r=hadiths[Math.floor(Math.random()*hadiths.length)]; document.getElementById('hadithText').textContent = r.text; }
renderHadith();

/* Prayer times via AlAdhan public API (no key required) */
async function setPrayerTimes(data){
  try{
    const timings = data.data.timings;
    document.getElementById('tFajr').textContent = timings.Fajr;
    document.getElementById('tSunrise').textContent = timings.Sunrise;
    document.getElementById('tDhuhr').textContent = timings.Dhuhr;
    document.getElementById('tAsr').textContent = timings.Asr;
    document.getElementById('tMaghrib').textContent = timings.Maghrib;
    document.getElementById('tIsha').textContent = timings.Isha;
  }catch(e){ console.warn(e); }
}

async function getPrayerTimesByGeo(){
  if(!navigator.geolocation){ alert('Geolocation not supported'); return; }
  navigator.geolocation.getCurrentPosition(async pos=>{
    const lat = pos.coords.latitude.toFixed(6), lon = pos.coords.longitude.toFixed(6);
    try{
      const res = await fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=2`);
      const data = await res.json();
      setPrayerTimes(data);
    }catch(e){ alert('Prayer times fetch failed'); }
  }, ()=>alert('Allow location to use this feature'));
}

async function getPrayerTimesByCity(){
  const city = document.getElementById('cityInput').value.trim();
  if(!city){ alert('Type a city name or use location'); return; }
  try{
    // Geocoding via Nominatim
    const geo = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(city)}`);
    const gdata = await geo.json();
    if(!gdata || !gdata[0]){ alert('City not found'); return; }
    const lat = parseFloat(gdata[0].lat).toFixed(6), lon = parseFloat(gdata[0].lon).toFixed(6);
    const res = await fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=2`);
    const data = await res.json();
    setPrayerTimes(data);
  }catch(e){ alert('Could not fetch prayer times'); }
}

/* Qibla using AlAdhan qibla endpoint & simple compass drawing */
async function getQiblaByGeo(){
  if(!navigator.geolocation){ alert('Geolocation not supported'); return; }
  navigator.geolocation.getCurrentPosition(async pos=>{
    const lat = pos.coords.latitude, lon = pos.coords.longitude;
    try{
      const res = await fetch(`https://api.aladhan.com/v1/qibla/${lat}/${lon}`);
      const data = await res.json();
      drawCompass(data.data.direction);
    }catch(e){ alert('Qibla fetch failed') }
  }, ()=>alert('Allow location to use this feature'));
}

function drawCompass(dir){
  const c = document.getElementById('qiblaCompass');
  const ctx = c.getContext('2d');
  // clear
  ctx.clearRect(0,0,c.width,c.height);
  // background
  ctx.fillStyle = '#fff';
  ctx.fillRect(0,0,c.width,c.height);
  // compass circle
  const cx = c.width/2, cy = c.height/2, r = Math.min(cx,cy)-20;
  ctx.beginPath(); ctx.arc(cx,cy,r,0,Math.PI*2); ctx.fillStyle = '#f6fffb'; ctx.fill();
  ctx.strokeStyle = '#e6efe6'; ctx.lineWidth = 6; ctx.stroke();
  // north marker
  ctx.fillStyle = '#0b5a3a'; ctx.font='18px Inter'; ctx.textAlign='center';
  ctx.fillText('N', cx, cy - r + 24);
  // needle
  const angle = (dir - 0) * Math.PI/180; // degrees to radians (dir is degrees from North clockwise)
  ctx.save(); ctx.translate(cx,cy); ctx.rotate(angle);
  // needle shape
  ctx.beginPath(); ctx.moveTo(0,-r+10); ctx.lineTo(10,0); ctx.lineTo(-10,0); ctx.closePath();
  ctx.fillStyle = '#c8a44c'; ctx.fill();
  ctx.restore();
  // show degrees
  const txt = Math.round(dir) + '° from North';
  ctx.fillStyle = '#0b5a3a'; ctx.font='14px Inter'; ctx.textAlign='center';
  ctx.fillText(txt, cx, cy + r - 8);
  document.getElementById('qiblaResult').textContent = 'Qibla direction: ' + txt;
}

/* Initial attempt: try geolocation on load to fill prayer times */
if(navigator.geolocation){
  navigator.geolocation.getCurrentPosition(pos=>{
    const lat=pos.coords.latitude.toFixed(6), lon=pos.coords.longitude.toFixed(6);
    fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=2`)
      .then(r=>r.json()).then(setPrayerTimes).catch(()=>{/* ignore */});
  }, ()=>{/* user blocked */});
}

/* Accessibility / small helpers */
// prevent accidental form submits for demo
document.getElementById('subscribeForm')?.addEventListener('submit', e=>e.preventDefault());
</script>
</body>
</html>
